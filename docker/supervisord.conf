[supervisord]
nodaemon=true

[program:postfix]
command=/usr/sbin/postfix start-fg
autostart=true

[program:rsyslog]
command=/usr/sbin/rsyslogd -n
autostart=true

[program:mail-logs]
command=/bin/sh -lc "mkdir -p /var/log && touch /var/log/mail.log && tail -n+1 -F /var/log/mail.log"
autostart=true

[program:blocker]
directory=/opt
command=python3 -m postfix_blocker.blocker
autostart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
redirect_stderr=true

[program:api]
directory=/opt
environment=API_HOST=0.0.0.0
command=python3 -m postfix_blocker.api
autostart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
redirect_stderr=true
